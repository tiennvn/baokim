{% assign productData = Model.Data %}
{% assign tagsProductIds = productData.Tags | map: "Id" %}
{% assign productListRealated = tagsProductIds | get_products_by_tag_ids: excludeId: productData.Id %}
{% assign newestProducts = "" | get_newest_products: excludeId: productData.Id %}

<div class="w-full mx-auto xl:max-w-7xl">
  <div class="flex flex-col gap-12 py-12 px-6 md:py-20 md:gap-16 lg:gap-16 lg:px-2 lg:py-[120px] 2xl:px-0">
    {% if productListRealated.Items.size > 0 %}
      <div class="flex items-center justify-between gap-4 reveal fadeInDown">
        <h2 class="text-header-1 font-semibold text-primary-1 md:text-heading-3 xl:text-heading-2">SẢN PHẨM
          <font color="#03650C">
            LIÊN QUAN</font>
        </h2>
        <div class="border-t border-primary-1 flex-auto hidden md:flex"></div>
        <div class="w-28 h-12 relative">
          <div class="swiper-button-prev swiper-button-prev_related left-0 h-12 w-12 bg-primary-1 rounded-full"></div>
          <div class="swiper-button-next swiper-button-next_related right-0 h-12 w-12 bg-primary-1 rounded-full"></div>
        </div>
      </div>
      <div class="swiper swiperRelated w-full max-w-full pb-[72px] md:pb-20 lg:pb-0 reveal fadeInUp">
        <div class="swiper-wrapper w-full">
          {{ 'Module__Shop_ProductListWrapper' | shape_new | shape_properties: Shape: 'FE__Shop_ProductList', Data: productListRealated | shape_render }}
        </div>
      </div>
    {% else %}
      <div class="flex items-center justify-between gap-4 reveal fadeInDown">
        <h2 class="text-header-1 font-semibold text-primary-1 uppercase md:text-heading-3 xl:text-heading-2">SẢN PHẨM
          <font color="#03650C">
            MỚI</font>
        </h2>
        <div class="border-t border-primary-1 flex-auto hidden md:flex"></div>
        <div class="w-28 h-12 relative">
          <div class="swiper-button-prev swiper-button-prev_related left-0 h-12 w-12 bg-primary-1 rounded-full"></div>
          <div class="swiper-button-next swiper-button-next_related right-0 h-12 w-12 bg-primary-1 rounded-full"></div>
        </div>
      </div>
      <div class="swiper swiperRelated w-full max-w-full pb-[72px] md:pb-20 lg:pb-0 reveal fadeInUp">
        <div class="swiper-wrapper w-full">
          {{ 'Module__Shop_ProductListWrapper' | shape_new | shape_properties: Shape: 'FE__Shop_ProductList', Data: newestProducts | shape_render }}
        </div>
      </div>
    {% endif %}
  </div>
</div>

{% scriptblock depends_on: "jQuery", at: "Foot" %}
  var swiperRelated = new Swiper(".swiperRelated", {
  slidesPerView: 1,
        spaceBetween: 30,
        pagination: {
            el: ".swiper-pagination_related",
            clickable: true,
        },
        navigation: {
                    nextEl: ".swiper-button-next_related",
                    prevEl: ".swiper-button-prev_related",
                },
        breakpoints: {
            768: {
                slidesPerView: 2,
                spaceBetween: 40,
            },
            1024: {
                slidesPerView: 3,
                spaceBetween: 16,
            },
            1280: {
                slidesPerView: 4,
                spaceBetween: 16,
            },
        },
      });{% endscriptblock %}
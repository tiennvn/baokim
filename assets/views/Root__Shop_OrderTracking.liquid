{% assign imageOrder = "Web-17/order-tracking.svg" | generate_proxy_url: width: null, height: null %}
{% assign imageOrder1 = "Web-17/decor-primary-full.svg" | generate_proxy_url: width: null, height: null %}
{% assign data = Model.Properties %}
{% assign blockId = data.OrderCode | raw %}
{% assign order = blockId | get_order %}

{{ 'Tra cứu đơn hàng' | page_title_segment: position: '0' }}
{{ Site.SiteName | page_title_segment: position: 'end' }}

{% zone "Header" %}
  {{ 'Module__MenuWrapper' | shape_new | shape_properties: Shape: 'FE__Menu' | shape_render }}
{% endzone %}

{% zone "Footer" %}
  {{ "Module__FooterWrapper" | shape_new | shape_properties: Shape: 'FE__Footer' | shape_render }}
{% endzone %}

<main>

  <section>
    <div class="bg-primary-4 mt-20 lg:overflow-hidden">
      <div class="mx-auto w-full xl:max-w-7xl">
        {% assign breadcrumbList = '' | split: ',' | init_breadcrumb: lastTitle: 'Tra cứu đơn hàng' %}
        {{ 'Module__Shop_BreadcrumbCustomWrapper' | shape_new | shape_properties: Shape: 'FE__Breadcrumb', Data: breadcrumbList | shape_render }}
      </div>
    </div>
  </section>
  {% if order == nil %}
    <section>
      <div class="w-full mx-auto xl:max-w-7xl">
        <div class="w-full relative overflow-hidden 2xl:overflow-visible">
          <div class="flex flex-col items-center w-full gap-12 px-6 py-12 md:px-24 md:py-20 md:gap-y-20 xl:items-start xl:flex-row lg:px-2 xl:py-[120px] 2xl:px-0">
            <div class="w-full max-w-[392px] -z-10 absolute -right-[40%] top-72 md:-right-[14%] lg:top-20 lg:-right-[64%] lg:max-w-none">
              <div class="relative w-full pt-[156.12%] lg:pt-[50%]">
                <img
                  src="{{ imageOrder1 }}"
                  alt=""
                  class="image-custom object-cover xl:object-contain">
              </div>
            </div>
            <div class="w-full md:px-[118px] xl:w-1/2 xl:pt-[98px] 2xl:px-0">
              <div class="flex flex-col items-center gap-4 w-full xl:w-3/4">
                <h3 class="text-neutral-1-700 text-center font-semibold text-heading-3 xl:w-full xl:text-left">Tra cứu đơn hàng</h3>
                {% form id: 'form', action: 'OrderTracking', controller: 'Order', route_area: "TWeb.Products", method: 'POST', class: 'flex flex-col gap-2 w-full' %}
                  <div class="flex h-fit w-full">
                    <input
                      id="order"
                      name="orderCode"
                      type="text"
                      value="{{ Request.Query.OrderCode[0] | raw }}"
                      placeholder="Nhập mã đơn hàng"
                      class="w-full px-6 py-4 border border-primary-1 focus:outline-0 text-body-2 placeholder:text-neutral-1-300 text-neutral-1-700 rounded-l-lg">
                    <button type="submit" class="flex items-center text-white bg-primary-1 p-3.5 rounded-r-lg">
                      <i class="twi-17-search-line-line text-2xl leading-none"></i>
                    </button>
                  </div>

                  <p class="text-error-400 text-body-2 hidden message-error">Vui lòng nhập mã đơn hàng!</p>
                  {% if blockId != nil %}
                    <p class="text-error-400 text-body-2 code-error">Không tìm thấy đơn hàng nào!</p>
                  {% endif %}
                {% endform %}

              </div>
            </div>
            <div class="w-full xl:w-1/2 xl:pr-8">
              <div class="relative w-full pt-[47.75%] md:pt-[47.81%] xl:pt-[48.75%]">
                <img
                  src="{{ imageOrder }}"
                  class="image-custom object-contain"
                  alt="">
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  {% else %}
    <section id="searchOrder">
      {{ 'Module__Shop_OrderTrackingDetailWrapper' | shape_new | shape_properties: Data: order, Shape: "FE__Shop_OrderTracking_Detail" | shape_render }}
    </section>

    <section>
      {{ 'Module__Shop_OrderTrackingDetailWrapper' | shape_new | shape_properties: Data: order, Shape: "FE__Info_Order" | shape_render }}
    </section>
  {% endif %}
</main>
{% scriptblock depends_on: "jQuery", at: "Foot" %}
  const form = document.getElementById('form');
  const order = document.getElementById('order');
                                                                    const messageError = document.querySelector('.message-error');
                                                                    const codeError = document.querySelector('.code-error');
                                                                    
                                                                    if (form) {
                                                                        form.addEventListener('submit', (e) => {
                                                                            
                                                                            if (order.value.trim() === '') {
                                                                              e.preventDefault();
                                                                                messageError.classList.add('error');
                                                                                codeError.classList.add('hidden');
                                                                                
                                                                            } else {
                                                                                messageError.classList.remove('error');
                                                                                codeError.classList.remove('hidden');
                                                                            };
                                                                        });
                                                                    
                                                                    }{% endscriptblock %}
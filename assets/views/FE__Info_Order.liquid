{% assign order = Model.Data %}
{% assign culture = "vi-VN" %}
{% assign currencyFormat = "{0:c}" %}
<div class="w-full bg-primary-4 px-4 py-5 md:px-6 md:py-10 lg:px-2 2xl:px-0">
  <div class="w-full xl:max-w-7xl xl:mx-auto">
    <div class="w-full flex gap-5 flex-col xl:flex-row">
      <div class="bg-white flex flex-col rounded-xl px-4 py-3.5 divide-neutral-2-100 md:divide-y xl:w-2/3">

        <!--- Giỏ hàng  --->
        <div class="text-heading-4 pb-4 items-center gap-x-4 hidden md:flex">
          <h4 class="text-neutral-1-800 font-semibold ">Giỏ hàng</h4>
          <p class="text-neutral-1-700">({{ order.OrderItems | size }}) sản phẩm</p>
        </div>

        <!--- sản phẩm  --->
        {% for product in order.OrderItems %}
          <div class="flex gap-x-3 py-3">
            <div class="w-1/5 p-3.5 rounded-[10px] bg-neutral-3-50 h-fit md:w-[11%]">
              <div class="relative w-full pt-[147.61%] md:pt-[148.38%]">
                <img
                  src="{{ product.AvatarProduct }}"
                  alt="{{ product.NameProduct | raw }}"
                  class="image-custom object-contain">
              </div>
            </div>
            <div class="w-4/5 flex flex-col justify-between md:w-[89%]">
              <p class="text-neutral-1-900 font-medium text-caption-1 md:text-body-1">{{ product.NameProduct | raw }}</p>
              <div class="flex justify-between">
                <div class="text-neutral-1-800 text-caption-1 md:text-body-1 flex flex-col justify-between w-1/2 md:w-2/3 md:flex-col-reverse">
                  {% assign variation = product.ProductCompinationId | get_variation_by_id %}
                  <div class="flex flex-wrap gap-1">
                    {% for variantValue in variation.VariantValues %}
                      {% if forloop.first %}
                        <p>
                          {{ variantValue.Name | raw }}
                        </p>
                      {% else %}
                        {% if variation.VariantValues.size > 1 %}
                          <span>
                            /
                          </span>
                        {% endif %}
                        <p>
                          {{ variantValue.Name | raw }}
                        </p>
                      {% endif %}
                    {% endfor %}
                  </div>
                  <div class="flex items-center gap-x-2">
                    <p class="pt-1 md:pt-0">Đơn giá:</p>
                    <p class="font-medium hidden md:flex">{{ product.PriceEach | currency: format: currencyFormat, culture: culture | raw }}</p>
                  </div>
                </div>
                <div class="font-medium flex flex-col h-full justify-between items-end md:flex-row-reverse md:justify-start md:gap-4 md:items-end w-1/2 md:w-1/3">
                  <p class="text-neutral-1-700 p-1 bg-neutral-3-50 rounded-md text-caption-2 md:text-body-2">X{{ product.Quantity | raw }}</p>
                  <p class="text-neutral-1-900 text-right text-caption-1 md:text-header-2 md:font-semibold">
                    {% assign totalPrice = product.PriceEach | times: product.Quantity %}
                    {{ totalPrice | currency: format: currencyFormat, culture: culture | raw }}
                  </p>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}

      </div>
      <div class="bg-white rounded-xl pt-3.5 pb-7 flex flex-col gap-y-3 top-24 xl:sticky xl:w-1/3 xl:h-fit">
        <div class="text-neutral-1-900 text-body-2 px-4 flex flex-col gap-y-2">
          <p class="text-secondary-1 font-semibold text-header-2">Thông tin giao hàng</p>
          <p class="pt-1.5">{{ order.FullName | raw }}</p>
          <p>{{ order.PhoneNumber | raw }}</p>
          <p>{{ order.Email | raw }}</p>
          <p>{{ order.FullAddress | raw }}</p>
          <p class="font-normal text-body-1 w-full break-words">
            <span class="font-medium">Ghi chú:</span>
            {{ order.Note | raw }}</p>
        </div>
        <div class="border-t w-full"></div>
        <div class="text-neutral-1-900 px-4 flex flex-col gap-y-[26px]">
          <p class="text-secondary-1 font-semibold text-header-2">Thông tin thanh toán</p>
          <div class="text-neutral-1-900 flex items-center justify-between text-body-2">
            <div>
              <p class="font-medium">Tổng tiền hàng</p>
              <p class="pt-1 italic">(Giá chưa bao gồm phí vận chuyển)</p>
            </div>
            <p class="font-medium whitespace-nowrap">{{ order.TotalPrice | currency: format: currencyFormat, culture: culture | raw }}</p>
          </div>
          <div class="flex justify-between items-center">
            <p class="text-neutral-1-900 font-medium">Tổng thanh toán</p>
            <p class="text-secondary-1 font-bold text-header-1">{{ order.TotalPrice | currency: format: currencyFormat, culture: culture | raw }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>